# **Module 1: Linux ki Buniyaad aur Boot Process**

## **Topic 1: Linux vs Windows Boot Process (Dono ka side-by-side comparison)**

### **1. Topic ka Naam / Ek Line Mein Summary** ðŸš€
**Linux vs Windows Boot Process:** Dono operating systems apne computer ko kaise "jagate" hain - ek technical comparison.

### **2. Ye Kya Hai? (What is it?)**
Boot Process wo step-by-step journey hai jo aapka computer power button dabane se lekar login screen tak karta hai. Windows aur Linux dono alag-alag tareeke se ye kaam karte hain.

**Analogy:** Sochiye aap subah uthte hain. Windows wala insaan pehle alarm sunke (BIOS), phir apni to-do list check karta hai (Boot.ini), phir dimag ko activate karta hai (Kernel), aur phir apne din ki services shuru karta hai. Linux wala insaan bhi yahi karta hai, lekin uski to-do list ka naam GRUB hai aur uska routine thoda alag hai.

### **3. Kyun Zaroori Hai? (Why is it important?)**
**Pentester ke liye:**
- Boot process mein attack vectors dhoondhne ke liye (jaise GRUB password bypass)
- Persistence mechanisms lagane ke liye (boot-time backdoors)
- Forensics ke liye - system kaise boot hua ye samajhna

**VPS Admin ke liye:**
- Boot failures ko troubleshoot karne ke liye
- Boot sequence ko optimize karne ke liye
- Security hardening ke liye (GRUB password, Secure Boot)

### **4. Ise Kab Use Karna Chahiye? (When to use it?)**
- Jab system boot nahi ho raha ho aur aapko troubleshoot karna ho
- Jab aapko physical access attack karna ho (pentesting)
- Jab aapko boot-level security implement karni ho
- Jab aapko dual-boot setup karna ho

### **5. Agar Ye Pata Nahi Hoga Toh Kya Hoga? (If not known then what?)** ðŸ˜Ÿ
Aap boot-related problems ko fix nahi kar payenge. Pentesting mein aap physical access attacks miss kar denge. Admin ke roop mein, agar server boot nahi hua to aap helpless rahenge aur data center jaana padega.

### **6. Ye Kaise Kaam Karta Hai? / Syntax aur Options**

**Windows Boot Process:**
1. **BIOS** â†’ Boot loader (NTLDR) ko activate karta hai
2. **NTLDR** â†’ Boot.ini file ko read karta hai
3. **Boot.ini** â†’ Windows boot configuration load karta hai
4. **Kernel** â†’ Windows kernel execute hota hai
5. **Services** â†’ System services start hoti hain
6. **SAM Check** â†’ Security Account Manager password maangta hai

**Linux Boot Process:**
1. **BIOS** â†’ MBR (Master Boot Record) ko execute karta hai
2. **MBR** â†’ GRUB (Grand Unified Bootloader) ko load karta hai
3. **GRUB** â†’ Kernel ko select aur load karta hai
4. **Kernel** â†’ `/sbin/init` ya `systemd` ko start karta hai
5. **init/systemd** â†’ Runlevel/Target programs ko execute karta hai
6. **Runlevel** â†’ Login screen display hota hai

### **7. Command Example (Poori Explanation ke Saath)**

**Linux mein boot logs dekhna:**
```bash
dmesg | less
```

| Command Part | Matlab |
|--------------|--------|
| `dmesg` | Kernel ring buffer messages dikhata hai (boot time messages) |
| `|` | Output ko pipe karta hai |
| `less` | Page-by-page dekhne ke liye |

**Expected Output:** Boot time hardware detection, driver loading, service startup messages.

**Boot sequence check karna:**
```bash
systemd-analyze
```
**Output:** `Startup finished in 2.5s (kernel) + 8.3s (userspace) = 10.8s`

### **8. Beginners ki Aam Galtiyan (Common Mistakes)**
- BIOS aur UEFI ko same samajhna (modern systems UEFI use karti hain)
- MBR aur GPT partition schemes ko confuse karna
- GRUB aur LILO ko same samajhna (LILO purana hai)
- Boot process aur login process ko ek samajhna
- Windows ke `Boot.ini` ko Linux mein dhoondhna (Linux mein GRUB config hai)

### **9. Best Practices / Pro Tips**
- **CRITICAL Fix:** Hamesha GRUB configuration change karne se pehle backup lein: `cp /boot/grub/grub.cfg /boot/grub/grub.cfg.backup`
- Boot logs ko regularly check karein: `journalctl -b` (current boot logs)
- **Stealth Tip:** Pentesting mein, GRUB menu ko edit karke single-user mode mein boot kar sakte hain
- `systemd-analyze blame` se pata chalega kaun si service boot ko slow kar rahi hai

### **10. Asli Duniya ka Scenario (Real-World Scenario)**
Ek pentester ko physical access mila ek company ke server ka. Usne server restart kiya, GRUB menu mein 'e' press karke boot parameters edit kiye, `init=/bin/bash` add kiya, aur direct root shell le liya bina password ke. Phir usne `/etc/shadow` file se password hashes extract kar liye. Agar use boot process ka gyaan na hota, to wo ye attack nahi kar pata.

### **11. Checklist / Chota Recap (TL;DR)**
- Windows: BIOS â†’ NTLDR â†’ Boot.ini â†’ Kernel â†’ Services â†’ SAM
- Linux: BIOS â†’ MBR â†’ GRUB â†’ Kernel â†’ init/systemd â†’ Runlevel
- `dmesg` se boot messages dekhein
- `systemd-analyze` se boot time check karein
- GRUB menu se boot parameters edit kar sakte hain

### **12. Aksar Puche Jaane Wale Sawaal (FAQs)**

**Q1: BIOS aur UEFI mein kya fark hai?**
A: BIOS purana firmware hai (16-bit), UEFI modern hai (32/64-bit) jo Secure Boot support karta hai aur faster boot deta hai.

**Q2: MBR kya hai aur kahan hota hai?**
A: Master Boot Record disk ke pehle 512 bytes mein hota hai. Ismein boot loader info (446 bytes), partition table (64 bytes), aur signature (2 bytes) hota hai.

**Q3: GRUB kya karta hai?**
A: GRUB ek bootloader hai jo multiple OS mein se choose karne deta hai, kernel ko load karta hai, aur boot parameters pass karta hai.

**Q4: Single-user mode kya hai?**
A: Ye ek special runlevel hai jahan sirf root user bina password ke login kar sakta hai, mainly recovery ke liye use hota hai.

### **13. Practice ke liye Task**
1. Apne system ko reboot karein aur boot time note karein
2. `systemd-analyze` command chalayein aur output save karein
3. `systemd-analyze blame` se top 5 slow services identify karein
4. `journalctl -b -p err` se current boot ke errors dekhein

**Expected Output:** Aapko boot time, service-wise breakdown, aur koi errors (agar hain) dikhni chahiye.

### **14. Extra / Advanced Jaankari (Optional)**
- **UEFI Secure Boot:** Ye feature sirf signed kernels ko boot karne deta hai, malware ko boot-time par rokta hai
- **initramfs:** Ye ek temporary root filesystem hai jo actual root filesystem mount hone se pehle load hoti hai
- **GRUB Rescue Mode:** Agar GRUB corrupt ho jaye to `grub rescue>` prompt milta hai, jahan se manually boot karna padta hai

### **15. Aakhri Choti Summary (5 lines)**
- Boot process BIOS se shuru hoke login screen tak ka safar hai
- Windows NTLDR aur Boot.ini use karta hai, Linux GRUB use karta hai
- Linux boot: BIOS â†’ MBR â†’ GRUB â†’ Kernel â†’ init â†’ Runlevel
- `dmesg` aur `systemd-analyze` boot troubleshooting ke liye zaroori hain
- GRUB menu edit karke password bypass kiya ja sakta hai (physical access attack)

> **Ye Zaroor Yaad Rakhein**
> 1. Boot process ka gyaan troubleshooting aur pentesting dono ke liye critical hai
> 2. GRUB Linux ka bootloader hai - ise edit karke system behavior change kar sakte hain
> 3. `systemd-analyze` boot performance check karne ka sabse aasan tareeka hai
> 4. Physical access ho to GRUB se password bypass ho sakta hai
> 5. Hamesha GRUB config ka backup rakhein changes karne se pehle

---

## **Topic 2: Linux Boot Process (BIOS â†’ MBR â†’ GRUB â†’ Kernel â†’ init/systemd)**

### **1. Topic ka Naam / Ek Line Mein Summary** ðŸš€
**Linux Boot Process Deep Dive:** BIOS se lekar login screen tak - har step ki detailed journey.

### **2. Ye Kya Hai? (What is it?)**
Ye wo 6-step process hai jo aapke Linux system ko power button se lekar usable state tak le jaata hai. Har step ek specific kaam karta hai aur agli step ko trigger karta hai.

**Analogy:** Ye ek relay race ki tarah hai. BIOS pehla runner hai jo baton (control) MBR ko deta hai, MBR GRUB ko, GRUB Kernel ko, Kernel init ko, aur init finally aapko login screen deta hai.

### **3. Kyun Zaroori Hai? (Why is it important?)**
**Pentester ke liye:**
- Har step mein potential attack vectors hain
- Boot-time persistence mechanisms lagane ke liye
- Rootkit detection ke liye
- Forensic analysis ke liye

**VPS Admin ke liye:**
- Boot failures ko diagnose karne ke liye
- Performance optimization ke liye
- Custom boot configurations ke liye
- Disaster recovery ke liye

### **4. Ise Kab Use Karna Chahiye? (When to use it?)**
- System boot nahi ho raha - troubleshooting ke liye
- Custom kernel compile kar rahe hain
- Boot-time services configure kar rahe hain
- Security audit kar rahe hain
- Pentesting mein physical access attacks plan kar rahe hain

### **5. Agar Ye Pata Nahi Hoga Toh Kya Hoga? (If not known then what?)** ðŸ˜Ÿ
Boot issues ko fix nahi kar payenge. "Kernel panic" ya "GRUB rescue" errors dekh kar ghabra jayenge. Pentesting mein boot-level attacks miss ho jayenge. Production server down hone par helpless rahenge.

### **6. Ye Kaise Kaam Karta Hai? / Syntax aur Options**

**Step-by-Step Detailed Process:**

**Step 1: BIOS (Basic Input/Output System)**
- Power-on self-test (POST) karta hai
- Hardware components check karta hai
- Boot device order check karta hai (HDD, USB, CD/DVD)
- MBR ko memory mein load karta hai
- Control MBR ko transfer karta hai

**Step 2: MBR (Master Boot Record)**
- Disk ke pehle sector (512 bytes) mein hota hai
- Location: `/dev/sda` ya `/dev/hda`
- 3 parts: Boot loader (446 bytes) + Partition table (64 bytes) + Magic number (2 bytes)
- GRUB ko locate karke execute karta hai

**Step 3: GRUB (Grand Unified Bootloader)**
- Splash screen dikhata hai
- Multiple OS options deta hai
- Kernel image ko select karta hai
- Kernel parameters pass karta hai
- Kernel aur initramfs ko memory mein load karta hai

**Step 4: Kernel**
- Hardware detect karta hai
- Drivers load karta hai
- Root filesystem mount karta hai
- `/sbin/init` ya `systemd` ko execute karta hai

**Step 5: init/systemd**
- System ka pehla process (PID 1)
- Runlevel/Target determine karta hai
- Services ko start karta hai
- User space initialize karta hai

**Step 6: Runlevel Programs**
- `/etc/rc.d/rc*.d/` se scripts execute hote hain
- 'S' se shuru = Startup scripts
- 'K' se shuru = Kill/Shutdown scripts
- Login screen display hota hai

### **7. Command Example (Poori Explanation ke Saath)**

**Boot process ko detail mein dekhna:**
```bash
journalctl -b | less
```

| Command Part | Matlab |
|--------------|--------|
| `journalctl` | systemd journal logs ko read karta hai |
| `-b` | Current boot ke logs dikhata hai |
| `| less` | Page-by-page scrolling ke liye |

**MBR ko backup lena:**
```bash
sudo dd if=/dev/sda of=~/mbr-backup.img bs=512 count=1
```

| Command Part | Matlab |
|--------------|--------|
| `dd` | Disk data copy karta hai |
| `if=/dev/sda` | Input file (source disk) |
| `of=~/mbr-backup.img` | Output file (backup location) |
| `bs=512` | Block size 512 bytes |
| `count=1` | Sirf pehla block copy karo |

**Expected Output:** `1+0 records in, 1+0 records out, 512 bytes copied`

### **8. Beginners ki Aam Galtiyan (Common Mistakes)**
- GRUB config directly edit karna (`grub.cfg`) instead of using `grub-mkconfig`
- MBR aur partition boot sector ko confuse karna
- `init` aur `systemd` ko same samajhna (systemd modern replacement hai)
- Boot logs ko ignore karna - wahan sabse pehle errors dikhte hain
- Kernel parameters ko randomly change karna bina samjhe

### **9. Best Practices / Pro Tips**
- **CRITICAL Fix:** GRUB update karne ka sahi tareeka: `sudo update-grub` (Debian/Ubuntu) ya `sudo grub2-mkconfig -o /boot/grub2/grub.cfg` (RHEL/CentOS)
- Boot logs hamesha save karein: `journalctl -b > boot-log.txt`
- **Stealth Tip:** Pentesting mein, GRUB password set na ho to `e` press karke boot parameters edit kar sakte hain
- Emergency boot ke liye hamesha ek Live USB ready rakhein
- `systemctl list-dependencies` se boot-time service dependencies dekh sakte hain

### **10. Asli Duniya ka Scenario (Real-World Scenario)**
Ek production server suddenly boot nahi ho raha tha. Admin ne Live USB se boot kiya, `chroot` karke actual system mein gaya, aur `journalctl -b -1` (previous boot logs) check kiye. Pata chala ki `/etc/fstab` mein ek wrong entry thi jo boot ko fail kar rahi thi. Usne wo entry comment out ki, reboot kiya, aur server wapas online aa gaya. Agar use boot process ka detailed gyaan na hota, to wo issue identify nahi kar pata.

### **11. Checklist / Chota Recap (TL;DR)**
- BIOS â†’ Hardware check â†’ MBR load
- MBR â†’ GRUB load (pehle 512 bytes se)
- GRUB â†’ Kernel select â†’ Memory mein load
- Kernel â†’ Hardware detect â†’ init/systemd start
- init/systemd â†’ Services start â†’ Login screen
- `journalctl -b` se boot logs dekhein

### **12. Aksar Puche Jaane Wale Sawaal (FAQs)**

**Q1: Runlevels kya hain?**
A: Runlevels system states hain:
- 0 = Shutdown
- 1 = Single-user mode (recovery)
- 3 = Multi-user with networking (no GUI)
- 5 = Multi-user with GUI
- 6 = Reboot

**Q2: systemd targets kya hain?**
A: Ye runlevels ka modern replacement hain:
- `poweroff.target` = Runlevel 0
- `rescue.target` = Runlevel 1
- `multi-user.target` = Runlevel 3
- `graphical.target` = Runlevel 5
- `reboot.target` = Runlevel 6

**Q3: initramfs kya hai?**
A: Initial RAM filesystem - ye ek temporary root filesystem hai jo actual root mount hone se pehle drivers load karta hai.

**Q4: GRUB rescue mode mein kaise boot karein?**
A: `grub rescue>` prompt par:
```
set root=(hd0,1)
linux /vmlinuz root=/dev/sda1
initrd /initrd.img
boot
```

### **13. Practice ke liye Task**
1. `systemctl get-default` se current default target check karein
2. `systemctl list-units --type=service --state=running` se running services dekhein
3. `dmesg | grep -i error` se boot-time errors check karein
4. `ls -l /boot/` se kernel aur initramfs files dekhein

**Expected Output:** 
- Default target: `graphical.target` ya `multi-user.target`
- 50-100 running services
- Hopefully koi errors nahi
- `vmlinuz-*` (kernel) aur `initrd.img-*` files

### **14. Extra / Advanced Jaankari (Optional)**
- **Kernel Parameters:** GRUB se `quiet`, `splash`, `nomodeset`, `single` jaise parameters pass kar sakte hain
- **Emergency Mode:** `systemd.unit=emergency.target` boot parameter se emergency shell mil sakta hai
- **GRUB Customization:** `/etc/default/grub` file edit karke timeout, default OS, etc. change kar sakte hain
- **Boot Chart:** `systemd-analyze plot > boot.svg` se graphical boot timeline bana sakte hain

### **15. Aakhri Choti Summary (5 lines)**
- Linux boot 6 steps mein hota hai: BIOS â†’ MBR â†’ GRUB â†’ Kernel â†’ init â†’ Runlevel
- Har step ek specific responsibility hai aur failure point hai
- GRUB bootloader hai jo kernel ko load karta hai
- systemd modern systems ka init system hai (PID 1)
- `journalctl -b` aur `dmesg` boot troubleshooting ke liye essential hain

> **Ye Zaroor Yaad Rakhein**
> 1. MBR disk ke pehle 512 bytes mein hota hai - ye GRUB ko load karta hai
> 2. GRUB menu mein 'e' press karke boot parameters edit kar sakte hain
> 3. Kernel PID 1 (init/systemd) ko start karta hai jo baaki sab start karta hai
> 4. Runlevel 1 = Single-user mode (password bypass ke liye use hota hai)
> 5. `journalctl -b` current boot logs dikhata hai, `-b -1` previous boot ke

---


# **Module 3: Essential Toolbox - Command-Line Kung-Fu (Part 2)**

## **Topic 2: Text Editing with Vim/Nano (Essential for Configs)**

### **1. Topic ka Naam / Ek Line Mein Summary** ðŸš€
**Text Editing with Vim/Nano:** Command-line par files edit karna - har admin aur pentester ki zaroorat.

### **2. Ye Kya Hai? (What is it?)**
Vim aur Nano command-line text editors hain jo remote servers par files edit karne ke liye use hote hain. Nano simple aur beginner-friendly hai, Vim powerful lekin seekhne mein time lagta hai kyunki iske alag modes hote hain.

**Analogy:** `nano` ek simple notepad hai - aap use uthate hain aur likhna shuru kar dete hain. `vim` ek Swiss army knife ki tarah hai - shuru mein thoda seekhna padta hai ki kaun sa tool (mode) kya kaam karta hai, lekin ek baar aap seekh gaye, to aap isse kuch bhi kar sakte hain, bahut tezi se.

### **3. Kyun Zaroori Hai? (Why is it important?)**
**Pentester ke liye:**
- Config Tampering: `/etc/passwd` ya `/etc/sudoers` edit karna
- Payload/Script likhna: Reverse shell scripts banana
- Web Shell Modify: Upload kiye gaye web shell ko customize karna
- Quick edits: Exploit code ko on-the-fly modify karna

**VPS Admin ke liye:**
- Service Configuration: `sshd_config`, `nginx.conf`, `my.cnf` edit karna
- Scripting: Shell scripts likhna aur debug karna
- System Files: `/etc/hosts`, `/etc/fstab` modify karna
- Log analysis: Log files quickly dekhna aur edit karna

### **4. Ise Kab Use Karna Chahiye? (When to use it?)**
- Remote server par kaam kar rahe hain (GUI nahi hai)
- Configuration files edit karni hain
- Scripts likhni ya modify karni hain
- Quick text changes karne hain
- Pentesting mein files tamper karni hain

### **5. Agar Ye Pata Nahi Hoga Toh Kya Hoga? (If not known then what?)** ðŸ˜Ÿ
Remote server par "padh" to payenge (`cat`), lekin "likh" nahi payenge. Configuration badal nahi payenge, scripts theek nahi kar payenge, firewall rules modify nahi kar payenge. Bina text editor ke, ek pentester ya sysadmin remote server par lagbhag bekaar hai.

### **6. Ye Kaise Kaam Karta Hai? / Syntax aur Options**

**Nano Basic Commands:**
```bash
nano filename          # File open karna
```

**Nano Shortcuts:**
- `Arrow Keys` - Cursor move karna
- `Ctrl + O` - File save karna (WriteOut)
- `Ctrl + X` - Exit karna
- `Ctrl + W` - Search karna (Where is)
- `Ctrl + K` - Line cut karna
- `Ctrl + U` - Paste karna (Uncut)
- `Ctrl + G` - Help menu

**Vim Modes:**
1. **Normal Mode** - Default mode, commands dene ke liye
2. **Insert Mode** - Text likhne ke liye (`i` press karke)
3. **Command-Line Mode** - Save/quit ke liye (`:` press karke)

**Vim Basic Commands:**
```bash
vim filename           # File open (Normal mode mein)
```

**Vim Essential Keys:**
- `i` - Insert mode (likhna shuru)
- `Esc` - Normal mode mein wapas
- `:w` - Save (write)
- `:q` - Quit
- `:wq` - Save aur quit
- `:q!` - Bina save quit (force)
- `dd` - Line delete (Normal mode)
- `yy` - Line copy (yank)
- `p` - Paste
- `/text` - Search karna
- `u` - Undo
- `Ctrl + r` - Redo

### **7. Command Example (Poori Explanation ke Saath)**

**Scenario 1: Nano se file edit karna**

```bash
nano /tmp/test.txt
```

| Command Part | Matlab |
|--------------|--------|
| `nano` | Nano editor |
| `/tmp/test.txt` | File path |

**Steps:**
1. File khulegi (ya naya file banegi)
2. Seedha type karna shuru karein
3. `Ctrl + O` dabayein (save)
4. Filename confirm karein (Enter)
5. `Ctrl + X` dabayein (exit)

**Expected Output:** File save ho jayegi.

**Scenario 2: Vim se file edit karna**

```bash
vim /tmp/test.txt
```

| Step | Command | Mode | Matlab |
|------|---------|------|--------|
| 1 | `vim /tmp/test.txt` | Opens in Normal | File open |
| 2 | `i` | Switch to Insert | Likhna shuru |
| 3 | (Type text) | Insert | Text likho |
| 4 | `Esc` | Back to Normal | Likhna band |
| 5 | `:wq` | Command-Line | Save aur quit |
| 6 | `Enter` | Execute | Command run |

**Expected Output:** File save ho jayegi.

**Scenario 3: Config file edit (Real-world)**

```bash
sudo nano /etc/ssh/sshd_config
```

**Changes:**
- `Port 22` ko `Port 2222` karna
- `PermitRootLogin yes` ko `no` karna

**Steps:**
1. File open karein
2. `Ctrl + W` se "Port" search karein
3. Value change karein
4. `Ctrl + O` save, `Ctrl + X` exit
5. `sudo systemctl restart sshd` service restart

**Scenario 4: Vim emergency exit**

Agar Vim mein phans gaye:
```
Esc Esc Esc :q! Enter
```

| Command | Matlab |
|---------|--------|
| `Esc Esc Esc` | Pakka Normal mode mein aa jao |
| `:q!` | Bina save force quit |
| `Enter` | Execute |

### **8. Beginners ki Aam Galtiyan (Common Mistakes)**
- **Vim:** `i` dabaye bina likhne ki koshish (commands type ho jayengi)
- **Vim:** Insert mode mein `Esc` dabana bhoolna
- **Vim:** Vim se bahar nikalna na aana (classic problem)
- **Nano:** `Ctrl + O` ke baad `Enter` dabana bhoolna
- **Both:** `sudo` ke bina system files edit karna (permission denied)
- Config files edit karke service restart na karna

### **9. Best Practices / Pro Tips**
- **CRITICAL Fix:** Important files edit se pehle backup: `sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak`
- **Nano for Quick:** Choti edits ke liye nano fast hai
- **Vim for Power:** Serious editing ke liye vim powerful hai
- `vimtutor` command se vim seekhein (30-minute interactive tutorial)
- Config files edit ke baad syntax check: `nginx -t`, `sshd -t`
- **Stealth Tip:** Pentesting mein `vim -n` use karein (swap file nahi banegi, traces kam)

### **10. Asli Duniya ka Scenario (Real-World Scenario)**
**Admin Scenario:** Ek admin ko production server par SSH port change karna tha. Usne `sudo vim /etc/ssh/sshd_config` khola, `/Port` se search kiya, `i` dabaya, `22` ko `2222` kiya, `Esc` dabaya, `:wq` se save kiya, `sudo sshd -t` se test kiya, aur `sudo systemctl restart sshd` se service restart ki. Agar use vim ka gyaan na hota, to wo ye kaam nahi kar pata.

**Pentester Scenario:** Ek pentester ko root access mil gaya. Usne `sudo vim /etc/passwd` khola, `O` daba kar naya line add kiya: `hacker:$1$hack$hash:0:0:Hacker:/root:/bin/bash`, `:wq` se save kiya. Usne "hacker" naam ka root user bana liya. Agar use vim ka gyaan na hota, to wo persistence achieve nahi kar pata.

### **11. Checklist / Chota Recap (TL;DR)**
- **Nano:** `Ctrl + O` save, `Ctrl + X` exit, `Ctrl + W` search
- **Vim:** `i` insert, `Esc` normal, `:wq` save+quit, `:q!` force quit
- Vim emergency exit: `Esc :q!`
- Config edit ke baad service restart
- Important files ka backup pehle lein

### **12. Aksar Puche Jaane Wale Sawaal (FAQs)**

**Q1: Vim se bahar kaise niklun? Phans gaya hoon!**
A: `Esc` key 2-3 baar dabayein, phir `:q!` type karein aur `Enter` dabayein. Ye bina save force quit karega.

**Q2: Nano ya Vim, kaun sa better hai?**
A: Nano beginners ke liye easy hai. Vim powerful hai lekin learning curve hai. Quick edits = Nano, Serious work = Vim.

**Q3: Vim mein copy-paste kaise karein?**
A: Normal mode mein `yy` se line copy (yank), `p` se paste. Visual mode (`v`) se select karke `y` se copy.

**Q4: Nano mein search kaise karein?**
A: `Ctrl + W` dabayein, text type karein, `Enter` dabayein.

**Q5: Config file edit karne ke baad service restart kyun zaroori hai?**
A: Config files sirf disk par hoti hain. Service ko naye config load karne ke liye restart zaroori hai.

### **13. Practice ke liye Task**
1. `nano ~/testfile.txt` - File banayein, "Hello Nano" likhein, save karein
2. `vim ~/testfile.txt` - Same file vim se kholein
3. Vim mein `i` dabayein, naya line add karein "Hello Vim"
4. `Esc` dabayein, `:wq` type karein, save karein
5. `cat ~/testfile.txt` - Verify karein

**Expected Output:**
```
Hello Nano
Hello Vim
```

### **14. Extra / Advanced Jaankari (Optional)**
- **Vim Plugins:** `Vundle`, `Pathogen` se plugins install karein (NERDTree, syntax highlighting)
- **`.vimrc`:** Vim configuration file - custom settings, shortcuts, colors
- **Visual Mode:** `v` se text select karein, operations karein
- **Vim Macros:** `q` se recording shuru, complex tasks automate karein
- **Nano Syntax Highlighting:** `/etc/nanorc` mein enable karein

### **15. Aakhri Choti Summary (5 lines)**
- Command-line par file edit karna essential skill hai
- Nano simple hai - `Ctrl` keys for everything
- Vim powerful hai - modes samajhna zaroori hai
- Vim emergency exit: `Esc :q!`
- Config files edit ke baad service restart karein

> **Ye Zaroor Yaad Rakhein**
> 1. **Nano:** `Ctrl+O` save, `Ctrl+X` exit
> 2. **Vim:** `i` insert, `Esc` normal, `:wq` save+quit
> 3. Vim se bahar: `Esc :q!`
> 4. Important files ka backup pehle
> 5. `vimtutor` se vim seekhein

---

## **Topic 3: File Search, Archiving & Manipulation**

### **1. Topic ka Naam / Ek Line Mein Summary** ðŸš€
**File Search, Archiving & Manipulation:** Files dhoondhna, compress karna, aur manipulate karna - command-line productivity ka core.

### **2. Ye Kya Hai? (What is it?)**
Ye wo commands hain jo files ko search karne (`find`, `locate`, `grep`), compress/extract karne (`tar`, `gzip`), aur manipulate karne (`cut`, `sort`, `uniq`) ke liye use hoti hain. Ye har Linux user ki daily toolkit hain.

**Analogy:** Sochiye aapke paas ek bada library hai. `find` wo librarian hai jo specific book dhoondhta hai. `grep` wo tool hai jo book ke andar specific word dhoondhta hai. `tar` wo packing service hai jo books ko box mein pack karti hai. `cut`, `sort`, `uniq` wo tools hain jo data ko organize karte hain.

### **3. Kyun Zaroori Hai? (Why is it important?)**
**Pentester ke liye:**
- Sensitive files dhoondhna (passwords, keys, configs)
- Log files analyze karna
- Backup files extract karna
- Data exfiltration ke liye compress karna
- Pattern matching (credentials, API keys)

**VPS Admin ke liye:**
- Files quickly locate karna
- Backups banana aur restore karna
- Logs analyze karna
- Disk space manage karna (large files dhoondhna)
- Data processing aur reporting

### **4. Ise Kab Use Karna Chahiye? (When to use it?)**
- Files dhoondhni hain (naam, size, type se)
- Logs mein specific patterns dhoondhne hain
- Backups banana/restore karna hai
- Data compress/decompress karna hai
- Large datasets process karni hain

### **5. Agar Ye Pata Nahi Hoga Toh Kya Hoga? (If not known then what?)** ðŸ˜Ÿ
Files manually dhoondhne mein ghanto waste honge. Pentesting mein important files miss ho jayengi. Backups efficiently nahi bana payenge. Log analysis impossible ho jayega. Data processing manual aur time-consuming hoga.

### **6. Ye Kaise Kaam Karta Hai? / Syntax aur Options**

**File Search Commands:**

**`find` - Powerful file search**
```bash
find /path -name "filename"           # Naam se search
find /path -type f                    # Sirf files
find /path -type d                    # Sirf directories
find /path -size +100M                # 100MB se badi files
find /path -mtime -7                  # Last 7 days mein modified
find /path -perm 777                  # Specific permissions
find /path -user username             # Specific user ki files
```

**`locate` - Fast search (database-based)**
```bash
locate filename                       # Filename search
sudo updatedb                         # Database update
```

**`grep` - Text pattern search**
```bash
grep "pattern" file                   # File mein pattern
grep -r "pattern" /path               # Recursive search
grep -i "pattern" file                # Case-insensitive
grep -v "pattern" file                # Invert (jo match na ho)
grep -n "pattern" file                # Line numbers ke saath
```

**Archive Commands:**

**`tar` - Archive create/extract**
```bash
tar cvf archive.tar files/            # Create archive
tar xvf archive.tar                   # Extract archive
tar czvf archive.tar.gz files/        # Create + gzip compress
tar xzvf archive.tar.gz               # Extract gzip
tar cjvf archive.tar.bz2 files/       # Create + bzip2 compress
tar xjvf archive.tar.bz2              # Extract bzip2
tar tvf archive.tar                   # List contents
```

**Manipulation Commands:**

**`cut` - Column extract karna**
```bash
cut -d: -f1 /etc/passwd               # Delimiter : se field 1
cut -c1-10 file                       # Characters 1-10
```

**`sort` - Lines sort karna**
```bash
sort file                             # Alphabetically sort
sort -r file                          # Reverse sort
sort -n file                          # Numeric sort
sort -u file                          # Unique lines (duplicates remove)
```

**`uniq` - Duplicate lines remove**
```bash
uniq file                             # Adjacent duplicates remove
sort file | uniq                      # All duplicates remove
uniq -c file                          # Count duplicates
```

### **7. Command Example (Poori Explanation ke Saath)**

**Scenario 1: Sensitive files dhoondhna**

```bash
find / -name "*.conf" -type f 2>/dev/null | head -20
```

| Command Part | Matlab |
|--------------|--------|
| `find /` | Root se search shuru |
| `-name "*.conf"` | .conf extension wali files |
| `-type f` | Sirf files (directories nahi) |
| `2>/dev/null` | Errors hide karo |
| `| head -20` | Pehli 20 results |

**Expected Output:** Config files ki list.

**Scenario 2: Large files dhoondhna (disk space cleanup)**

```bash
find /var -type f -size +100M -exec ls -lh {} \; 2>/dev/null
```

| Command Part | Matlab |
|--------------|--------|
| `/var` | /var directory mein search |
| `-size +100M` | 100MB se badi files |
| `-exec ls -lh {} \;` | Har file par ls command |
| `{}` | Found file ka placeholder |

**Expected Output:** Large files with sizes.

**Scenario 3: Password dhoondhna logs mein**

```bash
grep -r "password" /var/log/ 2>/dev/null | grep -v "Binary"
```

| Command Part | Matlab |
|--------------|--------|
| `grep -r` | Recursive search |
| `"password"` | Search pattern |
| `/var/log/` | Log directory |
| `grep -v "Binary"` | Binary files exclude |

**Expected Output:** Log entries with "password".

**Scenario 4: Backup banana**

```bash
tar czvf backup_$(date +%Y%m%d).tar.gz /var/www/html/
```

| Command Part | Matlab |
|--------------|--------|
| `tar` | Archive tool |
| `c` | Create |
| `z` | Gzip compress |
| `v` | Verbose (progress dikhao) |
| `f` | File (output filename) |
| `backup_$(date +%Y%m%d).tar.gz` | Filename with date |
| `/var/www/html/` | Source directory |

**Expected Output:** `backup_20240115.tar.gz` file banegi.

**Scenario 5: Backup extract karna**

```bash
tar xzvf backup_20240115.tar.gz -C /tmp/restore/
```

| Command Part | Matlab |
|--------------|--------|
| `x` | Extract |
| `z` | Gzip decompress |
| `v` | Verbose |
| `f` | File |
| `-C /tmp/restore/` | Extract location |

**Scenario 6: Usernames extract karna**

```bash
cut -d: -f1 /etc/passwd | sort
```

| Command Part | Matlab |
|--------------|--------|
| `cut -d:` | Delimiter colon |
| `-f1` | Field 1 (username) |
| `/etc/passwd` | User file |
| `| sort` | Alphabetically sort |

**Expected Output:** Sorted usernames list.

### **8. Beginners ki Aam Galtiyan (Common Mistakes)**
- `find` mein `2>/dev/null` na lagana (screen errors se bhar jayegi)
- `tar` mein `c` (create) aur `x` (extract) confuse karna
- `grep` mein case-sensitivity bhoolna (use `-i` for case-insensitive)
- `locate` use karne se pehle `updatedb` na chalana
- Archive extract karte waqt current directory check na karna (files scatter ho jayengi)

### **9. Best Practices / Pro Tips**
- **CRITICAL Fix:** Archive extract se pehle contents check karein: `tar tvf archive.tar`
- `find` ko `xargs` ke saath use karein efficiency ke liye
- **Stealth Tip:** Pentesting mein `find / -name "*.bak" -o -name "*.old"` se backup files dhoondhein
- Large archives ke liye `pigz` use karein (parallel gzip, faster)
- `grep --color=auto` alias banayein matches highlight ke liye

### **10. Asli Duniya ka Scenario (Real-World Scenario)**
Ek pentester ne web server par shell access li. Usne `find /var/www -name "*.bak" -o -name "config.php.old"` chalaya aur ek `database_config.php.bak` file mili jismein database credentials plain text mein the. Usne wo credentials use karke database access li.

Ek admin ko production server ka backup lena tha. Usne `tar czvf backup_$(date +%Y%m%d).tar.gz /var/www /etc/nginx /etc/mysql` chalaya aur ek compressed backup bana liya. Baad mein server crash ho gaya, usne `tar xzvf backup.tar.gz -C /` se restore kiya aur server wapas online aa gaya.

### **11. Checklist / Chota Recap (TL;DR)**
- `find /path -name "file"` - File search
- `grep -r "pattern" /path` - Text search
- `tar czvf archive.tar.gz dir/` - Compress
- `tar xzvf archive.tar.gz` - Extract
- `cut -d: -f1 file` - Column extract
- `sort file | uniq` - Duplicates remove

### **12. Aksar Puche Jaane Wale Sawaal (FAQs)**

**Q1: `find` aur `locate` mein kya fark hai?**
A: `find` real-time search karta hai (slow but accurate). `locate` database se search karta hai (fast but needs updatedb).

**Q2: `tar.gz` aur `tar.bz2` mein kaun sa better hai?**
A: `bz2` zyada compress karta hai (smaller size) lekin slow hai. `gz` fast hai lekin thoda bada. Production mein `gz` common hai.

**Q3: `grep` case-insensitive kaise karein?**
A: `-i` flag use karein: `grep -i "pattern" file`

**Q4: Archive extract karte waqt files overwrite ho jayengi?**
A: Haan. Isliye pehle `tar tvf` se contents check karein ya alag directory mein extract karein.

**Q5: Large files efficiently kaise compress karein?**
A: `pigz` use karein (parallel gzip): `tar cvf - dir/ | pigz > archive.tar.gz`

### **13. Practice ke liye Task**
1. `find /etc -name "*.conf" 2>/dev/null | head -5` - Config files dhoondhein
2. `mkdir test_backup && touch test_backup/file{1..5}.txt` - Test files banayein
3. `tar czvf test.tar.gz test_backup/` - Archive banayein
4. `tar tvf test.tar.gz` - Contents dekhein
5. `tar xzvf test.tar.gz -C /tmp/` - Extract karein
6. `cut -d: -f1,7 /etc/passwd | head -5` - Users aur shells

**Expected Output:**
- 5 config files
- Archive successfully created
- Archive contents list
- Files extracted to /tmp
- Username:shell pairs

### **14. Extra / Advanced Jaankari (Optional)**
- **`fd`:** Modern `find` alternative (faster, user-friendly)
- **`ripgrep` (rg):** Modern `grep` alternative (blazing fast)
- **`7z`:** Cross-platform compression (better than tar.gz)
- **`rsync`:** Incremental backups ke liye better than tar
- **`awk`:** Advanced text processing (cut ka powerful version)

### **15. Aakhri Choti Summary (5 lines)**
- `find` powerful file search hai, `locate` fast hai
- `grep` text patterns dhoondhta hai files/directories mein
- `tar` archives banata/extract karta hai, `z` flag gzip ke liye
- `cut`, `sort`, `uniq` data manipulation ke liye
- Ye commands pentesting aur administration dono mein daily use hoti hain

> **Ye Zaroor Yaad Rakhein**
> 1. `find` ke saath `2>/dev/null` errors hide karne ke liye
> 2. `tar czvf` create, `tar xzvf` extract
> 3. `grep -r` recursive search ke liye
> 4. Archive extract se pehle `tar tvf` se contents check karein
> 5. Backups regular banayein aur test karein

---

## **Module 3 Takeaway**

Is module mein humne Linux command-line ki essential tools seekhi. Package managers (APT/YUM) se software install/update karna seekha - ye pentesting tools aur server software manage karne ke liye zaroori hai. Text editors (Vim/Nano) se config files edit karna seekha - bina GUI ke remote servers par kaam karne ki foundation. File search aur manipulation commands se data dhoondhna, process karna, aur backups banana seekha. Ye sab skills har Linux user ke liye fundamental hain - chahe wo pentester ho ya sysadmin. Practice karte rahein, ye commands muscle memory ban jayengi.

